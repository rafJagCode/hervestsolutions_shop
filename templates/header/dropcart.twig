{#
// inputs: cart
#}

{# {% set cart = data('shop-cart.json') %} #}
{% set cart = inputs.cart %}

<div class="dropcart">
    <ul class="dropcart__list">
        {% for product in cart %}
            <li class="dropcart__item">
                <div class="dropcart__item-image image image--type--product">
                    <a class="image__body" href="product-full.html">
                        <img class="image__tag" src="{{ image(product.image) }}" alt="">
                    </a>
                </div>
                <div class="dropcart__item-info">
                    <div class="dropcart__item-name">
                        <a href="product-full.html">{{ product.product.name }}</a>
                    </div>
                    {% if item.options is defined %}
                        <ul class="dropcart__item-features">
                            {% for option in item.options %}
                                <li>{{ option.name }}: {{ option.value }}</li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                    <div class="dropcart__item-meta">
                        <div class="dropcart__item-quantity">{{ product.product.quantity }}</div>
                        <div class="dropcart__item-price">{{ product.product.price }}</div>
                        {# <div class="dropcart__item-price">{{ item.price|currency }}</div> #}
                    </div>
                </div>
                <button onclick="cartRemoveProduct({{product.id}})" type="button" class="dropcart__item-remove">{{ svg('cross-10.svg') }}</button>
            </li>
            <li class="dropcart__divider" role="presentation"></li>
        {% endfor %}
    </ul>
    <div class="dropcart__totals">
        <table>
                <tr>
                    <th>Razem: </th>
                    <td>{{ cart|reduce((sum, product) => sum + (product.product.price * product.product.quantity)) }} zł</td>
                </tr>
        </table>
    </div>
    <div class="dropcart__actions">
        <a href="cart" class="btn btn-secondary">Koszyk</a>
        <a href="checkout.html" class="btn btn-primary">Zamów</a>
    </div>
</div>
